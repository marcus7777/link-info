<link rel="import" href="/bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="/bower_components/polymer/polymer.html">
<!--
`<link-info></link-info>` Get information about a link by passing the HTML Returned
@demo demo.html
-->

<dom-module id="link-info">
  <template>
    <iron-ajax auto url="{{_url}}" handle-as="text" last-response="{{html}}"></iron-ajax>
  </template>
</dom-module>
<script>
Polymer({
  is: "link-info",
  properties: {
    doc: {
      computed: "getDoc(html)"
    },
    docTitle: {
      computed: "doc.title"
    },
    server: {
      value: "/bower_components/link-info/server/index.php"
    },
    _url {
      computed: "getUrl(server, url)"
    }
  },
  getDoc: function(html) {
    parser = new DOMParser()
    return parser.parseFromString(html, "text/html")
  },
  getUrl: function(server, url) {
    return server + '?u=' + encodeURIComponent(url)
  }
})
</script>
